

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Power control options &mdash; Project Bureau  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Programming options" href="program.html" />
    <link rel="prev" title="I/O buffer options" href="buffer.html" /> 
</head>

<body class="wy-body-for-nav">

  
    

  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Project Bureau
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../outline.html">Functional outline (WIP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../naming.html">Naming conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="logic.html">Macrocell options (WIP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="buffer.html">I/O buffer options</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Power control options</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pdx-pin-multiplexing">PDx pin multiplexing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#input-transition-detection">Input transition detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reset-hysteresis">Reset hysteresis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reducing-macrocell-power">Reducing macrocell power</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gating-product-term-power">Gating product term power</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="program.html">Programming options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schema.html">Database schema (WIP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explore.html">Database explorer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jtag/index.html">JTAG programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Command-line tools</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Project Bureau</a>
        
      </nav>


      <div class="wy-nav-content">
    
        
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Power control options</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/options/power.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="power-control-options">
<h1>Power control options<a class="headerlink" href="#power-control-options" title="Permalink to this headline">¶</a></h1>
<p>This section describes global device options related to power management.</p>
<div class="section" id="pdx-pin-multiplexing">
<span id="pd2-pin-func"></span><span id="pd1-pin-func"></span><h2>PDx pin multiplexing<a class="headerlink" href="#pdx-pin-multiplexing" title="Permalink to this headline">¶</a></h2>
<p>ATF15xx CPLDs do not have dedicated power gating pins. Instead, the two power gating signals, <code class="docutils literal notranslate"><span class="pre">PD1</span></code> and <code class="docutils literal notranslate"><span class="pre">PD2</span></code>, are multiplexed with normal macrocell I/O signals. Setting the device configuration options <code class="xref std std-fuse docutils literal notranslate"><span class="pre">pd1_pin_func</span></code> or <code class="xref std std-fuse docutils literal notranslate"><span class="pre">pd2_pin_func</span></code> to <code class="docutils literal notranslate"><span class="pre">pd</span></code> selects the power gating special function, leaving the macrocell buried; setting it to <code class="docutils literal notranslate"><span class="pre">user</span></code> selects the regular function.</p>
<p>Aside from reducing power consumption, asserting either of the power gating inputs latches and holds all internal and external signals, effectively freezing the device state.</p>
</div>
<div class="section" id="input-transition-detection">
<span id="standby-wakeup"></span><h2>Input transition detection<a class="headerlink" href="#input-transition-detection" title="Permalink to this headline">¶</a></h2>
<div class="admonition-portability admonition">
<p class="admonition-title">Portability</p>
<p>This option is present only in AS-series devices, and operational only in devices with an L suffix.</p>
</div>
<p>ATF15xxAS CPLDs can automatically enter and leave a low-power standby mode, determined by the frequency of transitions on one or more of the <strong>CLKx</strong> pins. In this low-power mode, the device has reduced performance, but otherwise operates normally. Setting the pin configuration option <code class="xref std std-fuse docutils literal notranslate"><span class="pre">pins[CLK1,CLK2,CLK3].standby_wakeup</span></code> to <code class="docutils literal notranslate"><span class="pre">on</span></code> causes the device to leave the standby mode when transitions occur sufficiently often on the corresponding <strong>CLKx</strong> pin; setting it to <code class="docutils literal notranslate"><span class="pre">off</span></code> causes transitions to be ignored on that pin. When running at full power, device performance increases to match the next lowest speed grade.</p>
</div>
<div class="section" id="reset-hysteresis">
<span id="id1"></span><h2>Reset hysteresis<a class="headerlink" href="#reset-hysteresis" title="Permalink to this headline">¶</a></h2>
<div class="admonition-portability admonition">
<p class="admonition-title">Portability</p>
<p>This option is present only in AS-series devices.</p>
</div>
<p>ATF15xxAS CPLDs may not reliably initialize the macrocell registers as a part of power-on reset if V<sub>CC</sub> stays too close to the reset level V<sub>RSTH</sub>. Setting the device configuration option <code class="xref std std-fuse docutils literal notranslate"><span class="pre">reset_hysteresis</span></code> to <code class="docutils literal notranslate"><span class="pre">large</span></code> ensures reliable initialization, but requires V<sub>CC</sub> to shut off completely if it falls below V<sub>RSTL</sub>; setting it to <code class="docutils literal notranslate"><span class="pre">small</span></code> reverses the tradeoff.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The values of V<sub>RSTH</sub> and V<sub>RSTL</sub> are not definitively known. For 3.3 V devices, it is likely that V<sub>RSTH</sub>/V<sub>RSTL</sub> are 3.0/2.0 V. For 5 V devices, it is likely that V<sub>RSTH</sub> is 4.0 V.</p>
</div>
</div>
<div class="section" id="reducing-macrocell-power">
<span id="low-power"></span><h2>Reducing macrocell power<a class="headerlink" href="#reducing-macrocell-power" title="Permalink to this headline">¶</a></h2>
<div class="admonition-portability admonition">
<p class="admonition-title">Portability</p>
<p>This option is present only in AS-series devices.</p>
</div>
<p>ATF15xxAS CPLDs provide a mechanism to reduce power consumed by a macrocell without completely disabling it. Setting the macrocell configuration option <code class="xref std std-fuse docutils literal notranslate"><span class="pre">low_power</span></code> to <code class="docutils literal notranslate"><span class="pre">on</span></code> reduces power by approx. 50% and performance by approx. 80%; setting it to <code class="docutils literal notranslate"><span class="pre">off</span></code> results in nominal power and performance.</p>
</div>
<div class="section" id="gating-product-term-power">
<span id="pt-power"></span><h2>Gating product term power<a class="headerlink" href="#gating-product-term-power" title="Permalink to this headline">¶</a></h2>
<div class="admonition-portability admonition">
<p class="admonition-title">Portability</p>
<p>This option is present only in AS-series devices.</p>
</div>
<p>Product terms of ATF15xxAS CPLDs consume significant active power when their inputs are switching, which is especially undesirable for unused macrocells (or macrocells that do not use product terms, e.g. driving an output with a fixed level). Setting the macrocell configuration option <code class="xref std std-fuse docutils literal notranslate"><span class="pre">pt_power</span></code> to <code class="docutils literal notranslate"><span class="pre">off</span></code> disables product term circuits and reduces power consumption; setting it to <code class="docutils literal notranslate"><span class="pre">on</span></code> makes it possible to use product terms to drive the macrocell.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When product term power is gated, every product term fuse must be set to <code class="docutils literal notranslate"><span class="pre">0</span></code>; then and only then the output of the product term stays low.</p>
<p>Vendor toolchain never sets fuses to <code class="docutils literal notranslate"><span class="pre">1</span></code> in disabled product terms. Hardware testing shows that setting any single fuse to <code class="docutils literal notranslate"><span class="pre">1</span></code> results in the output of the product term becoming high, is at odds with the definition of a product term. It’s not clear why this happens (parasitics?) but it is clear that the fuses of gated product terms should be always zeroed.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="program.html" class="btn btn-neutral float-right" title="Programming options" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="buffer.html" class="btn btn-neutral float-left" title="I/O buffer options" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019-2020, whitequark

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
    

      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>